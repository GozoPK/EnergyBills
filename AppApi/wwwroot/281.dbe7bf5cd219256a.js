"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[281],{5281:(D,g,r)=>{r.r(g),r.d(g,{UserEditModule:()=>I});var a=r(6895),c=r(6491),C=r(1224),e=r(1571),d=r(3143),h=r(3401);function v(u,s){if(1&u&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"a",4),e._UZ(4,"img",5),e.TgZ(5,"span",6),e._uU(6),e.qZA()(),e._UZ(7,"hr"),e.TgZ(8,"ul",7)(9,"li",8)(10,"a",9),e._uU(11," \u03a0\u03c1\u03bf\u03c6\u03af\u03bb "),e.qZA()(),e.TgZ(12,"li",8)(13,"a",10),e._uU(14," \u0391\u03c3\u03c6\u03ac\u03bb\u03b5\u03b9\u03b1 "),e.qZA()(),e.TgZ(15,"li",8)(16,"a",11),e._uU(17," \u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 "),e.qZA()(),e.TgZ(18,"li",8)(19,"a",12),e._uU(20," \u0391\u03b9\u03c4\u03ae\u03c3\u03b5\u03b9\u03c2 "),e.qZA()()(),e._UZ(21,"hr"),e.qZA()(),e.TgZ(22,"div",13),e._UZ(23,"router-outlet"),e.qZA()()),2&u){const t=s.ngIf;e.xp6(6),e.Oqu(t.name)}}let b=(()=>{class u{constructor(t,n){this.accountService=t,this.userBillsService=n,this.currentUser$=this.accountService.currentUser$}ngOnInit(){const t=new C.M;t.state="saved",this.userBillsService.getUserBills(t).subscribe({next:n=>this.userBillsService.setPagedList(n)})}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(d.B),e.Y36(h.x))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-user-edit-shell"]],decls:2,vars:3,consts:[["class","row h-100",4,"ngIf"],[1,"row","h-100"],[1,"col-md-3"],[1,"d-flex","flex-column","p-3","bg-light","min-height"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mb-3","mb-md-0","link-dark","text-decoration-none"],["src","./assets/user.png","alt","user photo",1,"round","mb-2"],[1,"fs-4"],[1,"nav","nav-pills","flex-column","mb-auto"],[1,"nav-item"],["routerLink","profile","routerLinkActive","active",1,"nav-link","link-dark"],["routerLink","security","routerLinkActive","active",1,"nav-link","link-dark"],["routerLink","details","routerLinkActive","active",1,"nav-link","link-dark"],["routerLink","bills","routerLinkActive","active",1,"nav-link","link-dark"],[1,"col-md-9"]],template:function(t,n){1&t&&(e.YNc(0,v,24,1,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.currentUser$))},dependencies:[a.O5,c.lC,c.yS,c.Od,a.Ov],styles:["@media only screen and (min-width: 770px){.min-height[_ngcontent-%COMP%]{height:100%}}.round[_ngcontent-%COMP%]{max-height:100px;border:2px solid white;border-radius:50%;display:inline}li[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(.active):hover{background-color:#2c3e50;opacity:.7}"]}),u})();var i=r(433),p=r(727),m=r(822),f=r(299);let _=(()=>{class u{constructor(t,n,o){this.fb=t,this.accountService=n,this.modalService=o,this.userDetailsForm=this.fb.group({email:["",[i.kI.required,i.kI.email]],phoneNumber:["",[i.kI.required,i.kI.minLength(10),i.kI.maxLength(10),i.kI.pattern(/^[0-9]+$/)]],iban:["",[i.kI.required,i.kI.minLength(27),i.kI.maxLength(27),i.kI.pattern(/^GR[0-9]+$/)]]}),this.sub=new p.w0}ngOnInit(){this.sub=this.accountService.currentUser$.subscribe({next:t=>{t&&this.userDetailsForm.setValue({email:t.email,phoneNumber:t.phoneNumber,iban:t.iban})}}),this.accountService.setErrorMessages(null)}saveChanges(){const t={...this.userDetailsForm.value};this.accountService.editUser(t).subscribe({next:()=>this.modalService.operModal("\u0395\u03c0\u03b9\u03c4\u03c5\u03c7\u03ae\u03c2 \u03b1\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7")})}ngOnDestroy(){this.sub.unsubscribe()}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(i.qu),e.Y36(d.B),e.Y36(m.Z))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-user-edit-details"]],decls:11,vars:9,consts:[[1,"pt-5","px-4","text-center","text-md-start"],[1,"row"],[1,"col-md-6","mb-5"],[3,"formGroup","ngSubmit"],[3,"formControl","label","type"],[3,"formControl","label"],["type","submit",1,"btn","btn-primary","mt-3",3,"disabled"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1,"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03c3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03c9\u03bd"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"div",1)(4,"div",2)(5,"form",3),e.NdJ("ngSubmit",function(){return n.saveChanges()}),e._UZ(6,"app-forms-input",4)(7,"app-forms-input",5)(8,"app-forms-input",5),e.TgZ(9,"button",6),e._uU(10,"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("formGroup",n.userDetailsForm),e.xp6(1),e.Q6J("formControl",n.userDetailsForm.controls.email)("label","E-mail")("type","email"),e.xp6(1),e.Q6J("formControl",n.userDetailsForm.controls.phoneNumber)("label","\u03a4\u03b7\u03bb\u03ad\u03c6\u03c9\u03bd\u03bf"),e.xp6(1),e.Q6J("formControl",n.userDetailsForm.controls.iban)("label","IBAN"),e.xp6(1),e.Q6J("disabled",n.userDetailsForm.invalid||n.userDetailsForm.untouched))},dependencies:[f.G,i._Y,i.JJ,i.JL,i.oH,i.sg]}),u})();var U=r(1135),Z=r(928);function A(u,s){1&u&&(e.TgZ(0,"h5",5),e._uU(1,"\u0394\u03b5\u03bd \u03b2\u03c1\u03ad\u03b8\u03b7\u03ba\u03b1\u03bd \u03b1\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b5\u03c2 \u03b1\u03b9\u03c4\u03ae\u03c3\u03b5\u03b9\u03c2"),e.qZA())}function x(u,s){if(1&u){const t=e.EpF();e.TgZ(0,"tr")(1,"th"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",12),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"span",13),e.NdJ("click",function(){const l=e.CHM(t).$implicit,B=e.oxw(3);return e.KtG(B.editBill(l))}),e._uU(9,"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03b9\u03b1"),e.qZA()(),e.TgZ(10,"td")(11,"span",13),e.NdJ("click",function(){const l=e.CHM(t).$implicit,B=e.oxw(3);return e.KtG(B.deleteBill(l.id))}),e._uU(12,"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae"),e.qZA()()()}if(2&u){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.billNumber)}}function T(u,s){if(1&u&&(e.TgZ(0,"div",6),e._UZ(1,"app-paging-counter",7),e.TgZ(2,"div",8)(3,"table",9)(4,"thead",10)(5,"tr")(6,"th"),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"\u0391\u03c1\u03b9\u03b8\u03bc\u03cc\u03c2 \u0391\u03af\u03c4\u03b7\u03c3\u03b7\u03c2"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"\u0391\u03c1. \u039b\u03bf\u03b3\u03b1\u03c1\u03b9\u03b1\u03c3\u03bc\u03bf\u03cd"),e.qZA(),e._UZ(12,"th")(13,"th"),e.qZA()(),e.TgZ(14,"tbody"),e.YNc(15,x,13,3,"tr",11),e.qZA()()()()),2&u){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("totalItems",t.pagination.totalItems)("currentPage",t.pagination.currentPage)("itemsPerPage",t.pagination.itemsPerPage),e.xp6(14),e.Q6J("ngForOf",t.result)}}function E(u,s){if(1&u){const t=e.EpF();e.TgZ(0,"div",14)(1,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().ngIf,l=e.oxw();return e.KtG(l.pagePrevious(o.pagination.currentPage-1))}),e._uU(2,"\u03a0\u03c1\u03bf\u03b7\u03b3\u03bf\u03cd\u03bc\u03b5\u03bd\u03bf"),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().ngIf,l=e.oxw();return e.KtG(l.pageNext(o.pagination.currentPage+1))}),e._uU(4,"\u0395\u03c0\u03cc\u03bc\u03b5\u03bd\u03bf"),e.qZA()()}if(2&u){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("disabled",1===t.pagination.currentPage),e.xp6(2),e.Q6J("disabled",t.pagination.currentPage===t.pagination.totalPages)}}function P(u,s){if(1&u&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,A,2,0,"h5",2),e.qZA(),e.YNc(3,T,16,4,"div",3),e.YNc(4,E,5,2,"div",4),e.BQk()),2&u){const t=s.ngIf;e.xp6(2),e.Q6J("ngIf",t.result&&0===t.result.length),e.xp6(1),e.Q6J("ngIf",t.result&&t.result.length>0&&t.pagination),e.xp6(1),e.Q6J("ngIf",t.pagination&&t.result&&t.result.length>0)}}let F=(()=>{class u{constructor(t,n){this.modalService=t,this.userBillsService=n,this.userParams=new C.M,this.sub=new p.w0,this.savedBillsChangedSubject=new U.X(!1),this.savedBillsChanged$=this.savedBillsChangedSubject.asObservable(),this.pagedList$=this.userBillsService.pagedList$}ngOnInit(){this.sub=this.savedBillsChanged$.subscribe({next:t=>{t&&(this.userParams.state="saved",this.loadBills(this.userParams))}})}loadBills(t){this.userBillsService.getUserBills(t).subscribe({next:n=>this.userBillsService.setPagedList(n)})}editBill(t){this.modalService.openEditBillModal(t).subscribe({next:n=>this.savedBillsChangedSubject.next(n)})}deleteBill(t){this.userBillsService.deleteBill(t).subscribe({next:()=>{this.modalService.operModal("\u0395\u03c0\u03b9\u03c4\u03c5\u03c7\u03ae\u03c2 \u03b4\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae"),this.savedBillsChangedSubject.next(!0)}})}pageNext(t){this.userParams.pageNumber=t,this.savedBillsChangedSubject.next(!0)}pagePrevious(t){this.userParams.pageNumber=t,this.savedBillsChangedSubject.next(!0)}ngOnDestroy(){this.sub.unsubscribe()}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(m.Z),e.Y36(h.x))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-user-edit-bills"]],decls:5,vars:3,consts:[[1,"pt-5","px-4","text-center","text-md-start"],[4,"ngIf"],["class","fst-italic fw-bold px-4",4,"ngIf"],["class","row",4,"ngIf"],["class","btn-group mb-5",4,"ngIf"],[1,"fst-italic","fw-bold","px-4"],[1,"row"],[3,"totalItems","currentPage","itemsPerPage"],[1,"col-md-11","mb-3","table-responsive"],[1,"table","table-striped","table-hover"],[1,"thead-light"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"link",3,"click"],[1,"btn-group","mb-5"],["role","button",1,"btn","btn-outline-primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1,"\u0391\u03c0\u03bf\u03b8\u03b7\u03ba\u03b5\u03c5\u03bc\u03ad\u03bd\u03b5\u03c2 \u0391\u03b9\u03c4\u03ae\u03c3\u03b5\u03b9\u03c2"),e.qZA(),e._UZ(2,"hr"),e.YNc(3,P,5,3,"ng-container",1),e.ALo(4,"async")),2&t&&(e.xp6(3),e.Q6J("ngIf",e.lcZ(4,1,n.pagedList$)))},dependencies:[a.sg,a.O5,Z.k,a.Ov],styles:[".link[_ngcontent-%COMP%]{cursor:pointer;color:#18bc9c;text-decoration:underline}"]}),u})();function w(u,s){if(1&u&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"span")(4,"strong"),e._uU(5,"\u0391.\u03a6.\u039c."),e.qZA()(),e.TgZ(6,"span"),e._uU(7),e.qZA()(),e.TgZ(8,"div",4)(9,"span")(10,"strong"),e._uU(11,"Email"),e.qZA()(),e.TgZ(12,"span"),e._uU(13),e.qZA()(),e.TgZ(14,"div",4)(15,"span")(16,"strong"),e._uU(17,"\u03a4\u03b7\u03bb\u03ad\u03c6\u03c9\u03bd\u03bf"),e.qZA()(),e.TgZ(18,"span"),e._uU(19),e.qZA()(),e.TgZ(20,"div",4)(21,"span")(22,"strong"),e._uU(23,"\u0394\u03b9\u03b5\u03cd\u03b8\u03c5\u03bd\u03c3\u03b7"),e.qZA()(),e.TgZ(24,"span"),e._uU(25),e.qZA()(),e.TgZ(26,"div",4)(27,"span")(28,"strong"),e._uU(29,"\u03a0\u03cc\u03bb\u03b7"),e.qZA()(),e.TgZ(30,"span"),e._uU(31),e.qZA()(),e.TgZ(32,"div",4)(33,"span")(34,"strong"),e._uU(35,"\u0395\u03b9\u03c3\u03cc\u03b4\u03b7\u03bc\u03b1"),e.qZA()(),e.TgZ(36,"span"),e._uU(37),e.ALo(38,"currency"),e.qZA()(),e.TgZ(39,"div",5)(40,"span")(41,"strong"),e._uU(42,"IBAN"),e.qZA()(),e.TgZ(43,"div",6),e._uU(44),e.qZA()()()()),2&u){const t=s.ngIf;e.xp6(7),e.Oqu(t.afm),e.xp6(6),e.Oqu(t.email),e.xp6(6),e.Oqu(t.phoneNumber),e.xp6(6),e.lnq("",t.addressStreet," ",t.addressNumber,", ",t.postalCode,""),e.xp6(6),e.Oqu(t.city),e.xp6(6),e.Oqu(e.xi3(38,9,t.annualIncome,"EUR")),e.xp6(7),e.Oqu(t.iban)}}const S=[{path:"",component:b,children:[{path:"profile",component:(()=>{class u{constructor(t){this.accountService=t,this.currentUser$=this.accountService.currentUser$}ngOnInit(){}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(d.B))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-user-edit-profile"]],decls:5,vars:3,consts:[[1,"pt-5","px-4","text-center","text-md-start"],["class","row px-4 mb-5",4,"ngIf"],[1,"row","px-4","mb-5"],[1,"col-md-7"],[1,"d-flex","justify-content-between","mb-3"],[1,"d-flex","flex-md-row","flex-column","justify-content-between","mb-3"],[1,"text-end"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1,"\u03a3\u03c4\u03bf\u03b9\u03c7\u03b5\u03af\u03b1 \u039b\u03bf\u03b3\u03b1\u03c1\u03b9\u03b1\u03c3\u03bc\u03bf\u03cd"),e.qZA(),e._UZ(2,"hr"),e.YNc(3,w,45,12,"div",1),e.ALo(4,"async")),2&t&&(e.xp6(3),e.Q6J("ngIf",e.lcZ(4,1,n.currentUser$)))},dependencies:[a.O5,a.Ov,a.H9]}),u})()},{path:"security",component:(()=>{class u{constructor(t,n,o){this.fb=t,this.accountService=n,this.modalService=o,this.changePasswordForm=this.fb.group({oldPassword:["",i.kI.required],newPassword:["",[i.kI.required,i.kI.minLength(10)]],confirmPassword:["",[i.kI.required,this.matchPasswords("newPassword")]]}),this.sub=new p.w0}ngOnInit(){this.accountService.setErrorMessages(null),this.sub=this.changePasswordForm.controls.newPassword.valueChanges.subscribe({next:()=>this.changePasswordForm.controls.confirmPassword.updateValueAndValidity()})}matchPasswords(t){return n=>n?.value===n.parent?.get(t)?.value?null:{notMatching:!0}}changePassword(){const t={...this.changePasswordForm.value};this.accountService.changePassword(t).subscribe({next:()=>{this.modalService.operModal("\u039f \u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2 \u03c3\u03b1\u03c2 \u03ac\u03bb\u03bb\u03b1\u03be\u03b5."),this.changePasswordForm.reset()}})}ngOnDestroy(){this.sub.unsubscribe()}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(i.qu),e.Y36(d.B),e.Y36(m.Z))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-user-edit-security"]],decls:11,vars:11,consts:[[1,"pt-5","px-4","text-center","text-md-start"],[1,"row"],[1,"col-md-6","mb-5"],[3,"formGroup","ngSubmit"],[3,"formControl","label","type"],["type","submit",1,"btn","btn-primary","mt-3",3,"disabled"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e._uU(1,"\u0391\u03bb\u03bb\u03b1\u03b3\u03ae \u03ba\u03c9\u03b4\u03b9\u03ba\u03bf\u03cd"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"div",1)(4,"div",2)(5,"form",3),e.NdJ("ngSubmit",function(){return n.changePassword()}),e._UZ(6,"app-forms-input",4)(7,"app-forms-input",4)(8,"app-forms-input",4),e.TgZ(9,"button",5),e._uU(10,"\u0391\u03bb\u03bb\u03b1\u03b3\u03ae \u039a\u03c9\u03b4\u03b9\u03ba\u03bf\u03cd"),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("formGroup",n.changePasswordForm),e.xp6(1),e.Q6J("formControl",n.changePasswordForm.controls.oldPassword)("label","\u03a0\u03b1\u03bb\u03b9\u03cc\u03c2 \u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2")("type","password"),e.xp6(1),e.Q6J("formControl",n.changePasswordForm.controls.newPassword)("label","\u039d\u03ad\u03bf\u03c2 \u039a\u03c9\u03b4\u03b9\u03ba\u03cc\u03c2")("type","password"),e.xp6(1),e.Q6J("formControl",n.changePasswordForm.controls.confirmPassword)("label","\u0395\u03c0\u03b9\u03b2\u03b5\u03b2\u03b1\u03af\u03c9\u03c3\u03b7 \u039d\u03ad\u03bf\u03c5 \u039a\u03c9\u03b4\u03b9\u03ba\u03bf\u03cd")("type","password"),e.xp6(1),e.Q6J("disabled",n.changePasswordForm.invalid))},dependencies:[f.G,i._Y,i.JJ,i.JL,i.oH,i.sg]}),u})()},{path:"details",component:_},{path:"bills",component:F},{path:"",redirectTo:"profile",pathMatch:"full"}]}];let y=(()=>{class u{}return u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[a.ez,c.Bz.forChild(S),c.Bz]}),u})();var q=r(4335);let I=(()=>{class u{}return u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[a.ez,y,q.m]}),u})()}}]);